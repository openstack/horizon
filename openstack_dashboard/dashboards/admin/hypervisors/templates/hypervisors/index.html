{% extends 'base.html' %}
{% load i18n horizon humanize sizeformat %}

{% block title %}{% trans "Hypervisors" %}{% endblock %}

{% block main %}
<div class="quota-dynamic">
  <h3>{% trans "Hypervisor Summary" %}</h3>
    <div class="col-sm-4 d3_quota_bar">
      <div class="pie-chart-usage" data-used="{% widthratio stats.memory_mb_used stats.memory_mb 100 %}"></div>
      <div class="h5">{% trans "Memory Usage" %}</div>
      <div class="h6">
         {% blocktrans with used=stats.memory_mb_used|mb_float_format available=stats.memory_mb|mb_float_format %}Used <span> {{ used }} </span> of <span> {{ available }} </span>{% endblocktrans %}
      </div>
    </div>

    <div class="col-sm-4 d3_quota_bar">
      <div class="pie-chart-usage" data-used="{% widthratio stats.local_gb_used stats.local_gb 100 %}"></div>
       <div class="h5">{% trans "Local Disk Usage" %}</div>
       <div class="h6">
         {% blocktrans with used=stats.local_gb_used|diskgbformat available=stats.local_gb|diskgbformat %}Used <span> {{ used }} </span> of <span> {{ available }} </span>{% endblocktrans %}
       </div>
    </div>
</div>
<div class="quota-dynamic">
  <h3>{% trans "Resource Providers Summary" %}</h3>
  {% for provider in providers %}
    <h4>{{ provider.name }}</h4>
    <div class="col-sm-4 d3_quota_bar col-lg-3 col-md-2 col-xs-4">
      <div class="pie-chart-usage" data-used="{% widthratio provider.usages.VCPU provider.inventories.VCPU.total 100 %}"></div>
      <div class="h5">{% trans "VCPU Usage" %}</div>
      {% if provider.inventories.VCPU != None %}
      <div class="h6">
        {% blocktrans with used=provider.usages.VCPU|intcomma available=provider.inventories.VCPU.total|intcomma %}Used <span> {{ used }} </span> of <span> {{ available }} </span>{% endblocktrans %}
      </div>
      {% endif %}
    </div>

    <div class="col-sm-4 d3_quota_bar col-lg-3 col-md-2 col-xs-4">
      <div class="pie-chart-usage" data-used="{% widthratio provider.usages.PCPU provider.inventories.PCPU.total 100 %}"></div>
      <div class="h5">{% trans "PCPU Usage" %}</div>
      {% if provider.inventories.PCPU != None %}
      <div class="h6">
        {% blocktrans with used=provider.usages.PCPU|intcomma available=provider.inventories.PCPU.total|intcomma %}Used <span> {{ used }} </span> of <span> {{ available }} </span>{% endblocktrans %}
      </div>
      {% endif %}
    </div>

    <div class="col-sm-4 d3_quota_bar col-lg-3 col-md-2 col-xs-4">
      <div class="pie-chart-usage" data-used="{% widthratio provider.usages.MEMORY_MB provider.inventories.MEMORY_MB.total 100 %}"></div>
      <div class="h5">{% trans "Memory Usage" %}</div>
      <div class="h6">
         {% blocktrans with used=provider.usages.MEMORY_MB|mb_float_format available=provider.inventories.MEMORY_MB.total|mb_float_format %}Used <span> {{ used }} </span> of <span> {{ available }} </span>{% endblocktrans %}
      </div>
    </div>

    <div class="col-sm-4 d3_quota_bar col-lg-3 col-md-2 col-xs-4">
      <div class="pie-chart-usage" data-used="{% widthratio provider.usages.DISK_GB provider.inventories.DISK_GB.total 100 %}"></div>
       <div class="h5">{% trans "Local Disk Usage" %}</div>
       <div class="h6">
         {% blocktrans with used=provider.usages.DISK_GB|diskgbformat available=provider.inventories.DISK_GB.total|diskgbformat %}Used <span> {{ used }} </span> of <span> {{ available }} </span>{% endblocktrans %}
       </div>
    </div>
  {% endfor %}
</div>
<div class="row-fluid">
  <div class="col-sm-12">
    {{ tab_group.render }}
  </div>
</div>
{% endblock %}
